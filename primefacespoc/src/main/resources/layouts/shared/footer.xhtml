<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:sec="http://www.springframework.org/security/tags" 
	xmlns:p="http://primefaces.org/ui">

	<ui:fragment rendered='#{generaliWebFlowEngine == null}'>
		<div class="row">
			<div class="col-md-12">
				<h3>La configuración solo está disponible dentro del flujo</h3>
			</div>
		</div>
	</ui:fragment>
	
	<ui:fragment rendered='#{generaliWebFlowEngine != null}'>
		<div class="row">
			<div class="col-md-6">
				<h2>CONFIGURACIÓN</h2>
			</div>
		</div>
		<h:form id="setupForm">
			<div class="row">
				<div class="col-md-6">
					<h3>Datos a inicializar</h3>
				</div>
				<div class="col-md-6">
					<h3>Pasos disponibles en PrimefacesPOC</h3>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
					<div class="form-group">
						<div class="col-md-6">
							<ui:repeat id="checkLeftInicializar" var="result" value="#{generaliWebFlowEngine.flow.selectNodes('//flow/step')}" varStatus="iter">
								<ui:fragment rendered='#{result.valueOf("@name") lt 6}'>
									<div class="checkbox checkbox-primary">
										<h:selectBooleanCheckbox id="menu" value="#{generaliWebFlowEngine.config[result.valueOf('@view').concat('Inicializar')]}"
											styleClass="chkComponentInicializar" />
										<p:outputLabel>#{result.valueOf("@name")} - #{result.valueOf("@menu")}</p:outputLabel>
									</div>
								</ui:fragment>
							</ui:repeat>
						</div>
						<div class="col-md-6">
							<ui:repeat id="checkRightInicializar" var="result" value="#{generaliWebFlowEngine.flow.selectNodes('//flow/step')}" varStatus="iter">
								<ui:fragment rendered='#{!(result.valueOf("@name") lt 6)}'>
									<div class="checkbox checkbox-primary">
										<h:selectBooleanCheckbox id="menu" value="#{generaliWebFlowEngine.config[result.valueOf('@view').concat('Inicializar')]}"
											styleClass="chkComponentInicializar" />
										<p:outputLabel>#{result.valueOf("@name")} - #{result.valueOf("@menu")}</p:outputLabel>
									</div>
								</ui:fragment>
							</ui:repeat>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-6">
							<div class="checkbox checkbox-primary">
								<input type="checkbox" id="allInicializar" name="allInicializar" onClick="selectAllSetupChecksInicializar();"></input>
								<label for="allInicializar">TODO</label>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-group">
						<div class="col-md-6">
							<ui:repeat id="checkLeftExterno" var="result" value="#{generaliWebFlowEngine.flow.selectNodes('//flow/step')}" varStatus="iter">
								<ui:fragment rendered='#{result.valueOf("@name") lt 6}'>
									<div class="checkbox checkbox-primary">
										<h:selectBooleanCheckbox id="menu" value="#{generaliWebFlowEngine.config[result.valueOf('@view').concat('Externo')]}"
											styleClass="chkComponentExterno" />
										<p:outputLabel>#{result.valueOf("@name")} - #{result.valueOf("@menu")}</p:outputLabel>
									</div>
								</ui:fragment>
							</ui:repeat>
						</div>
						<div class="col-md-6">
							<ui:repeat id="checkRightExterno" var="result" value="#{generaliWebFlowEngine.flow.selectNodes('//flow/step')}" varStatus="iter">
								<ui:fragment rendered='#{!(result.valueOf("@name") lt 6)}'>
									<div class="checkbox checkbox-primary">
										<h:selectBooleanCheckbox id="menu" value="#{generaliWebFlowEngine.config[result.valueOf('@view').concat('Externo')]}"
											styleClass="chkComponentExterno" />
										<p:outputLabel>#{result.valueOf("@name")} - #{result.valueOf("@menu")}</p:outputLabel>
									</div>
								</ui:fragment>
							</ui:repeat>
						</div>
					</div>
					<div class="form-group">
						<div class="col-md-6">
							<div class="checkbox checkbox-primary">
								<input type="checkbox" id="allExterno" name="allExterno" onClick="selectAllSetupChecksExterno();"></input>
								<label for="allExterno">TODO</label>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
				<div class="form-group ">
					<h:outputLabel for="kbContrato" styleClass="control-label">
						Longitud del contrato en KB:
					</h:outputLabel>
					<p:inputText id="kbContrato" style="color:#000;" value="#{generaliWebFlowEngine.config.kbContrato}" 
						styleClass="form-control" label="Longitud del contrato en KB"/>
				</div>
				</div>
				<div class="col-md-6">
					<div class="checkbox checkbox-primary">
						<h:selectBooleanCheckbox id="useDistributedCache" value="#{generaliWebFlowEngine.config.useDistributedCache}" />
						<p:outputLabel>Usar cache distribuido</p:outputLabel>
					</div>
				</div>
			</div>
			<div class="separator-sm"></div>
			<div class="row">
				<div class="form-group">
					<div class="col-md-6">
						<p:commandLink id="performSetup" action="#{seguroHogarFlowAction.setup(generaliWebFlowEngine.config)}" 
							styleClass="btn btn-default" style="color:#000;" ajax="false">
							Aplicar
						</p:commandLink>
					</div>
				</div>
			</div>
			<div class="separator-sm"></div>
		</h:form>
	</ui:fragment>
</html>	